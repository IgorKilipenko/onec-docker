version: "3"

services:
    training-platform:
        image: training-platform:latest
        build: ./training-platform/
        environment:
            - DISPLAY=${DISPLAY}
        volumes:
            - /tmp/.X11-unix:/tmp/.X11-unix
            - onecdb-data:/data
        network_mode: host

    community-platform:
        image: community-platform:latest
        build: ./community-platform/
        environment:
            - DISPLAY=${DISPLAY}
        volumes:
            - /tmp/.X11-unix:/tmp/.X11-unix
            - onecdb-data:/data
        ports:
            - "5900:5900"

    community-server:
        image: community-server:latest
        build: ./community-server/
        environment:
            - PLT_VERSION=8.3.24.1368
        volumes:
            - onecdb-server-data:/data
        ports:
            - "1540:1541"
            - "1560:1591"
        network_mode: host

volumes:
    onecdb-data:
    onecdb-server-data:
